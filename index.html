<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self';">
  <title>Entry Level</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Header with floating menu icon and menu -->
  <header>
    <div class="top-right-icon" id="menu-button" title="App Menu" aria-label="Open App Menu" tabindex="0">â˜°</div>
    <nav class="floating-menu hidden" id="floating-menu" aria-label="App Menu">
      <ul>
        <li><button type="button" aria-label="About">About</button></li>
        <li><button type="button" id="open-settings" aria-label="Open Settings">Settings</button></li>
        <li><button type="button" id="import-export-menu" aria-label="Import/Export">Import/Export</button></li>
        <li><button type="button" aria-label="Debug Tools">Debug Tools</button></li>
        <li><button type="button" id="open-exit" aria-label="Exit Application">Exit</button></li>
      </ul>
    </nav>
  </header>

  <!-- Main app content -->
  <main>
    <div class="app-shell">
      <div class="content-container">

        <!-- Main Menu -->
        <div id="main-menu" class="screen">
          <h1>Entry Level App</h1>
          <div class="button-group">
            <button class="big-button" data-screen="new-record-screen" aria-label="Create New Record">Create New Record</button>
            <button class="big-button" data-screen="select-record-screen" aria-label="Create New Entry">Create New Entry</button>
            <button class="big-button" data-screen="view-records-screen" aria-label="View Records">View Records</button>
          </div>
        </div>


        <!-- Create New Record Path -->
        <div id="new-record-screen" class="screen hidden">
          <h2>Create New Record</h2>
          <div class="button-group">
            <button class="big-button" data-screen="select-template-screen" aria-label="Use Existing Template">Use Existing Template</button>
            <button class="big-button" data-screen="create-template-screen" aria-label="Create New Template">Create New Template</button>
            <button id="import-record-button" class="big-button" aria-label="Import from File">Import from File</button>
          </div>
        </div>

        <!-- View Records Screen -->
        <div id="view-records-screen" class="screen hidden">
          <h2>View Records</h2>
          <div class="button-group">
            <button class="big-button" data-screen="all-records-screen" aria-label="View all records">All Records</button>
            <button id="filter-records-button" class="big-button" data-screen="record-preview-screen" aria-label="Filter records">Filter Records</button>
          </div>
        </div>

        <!-- Record Preview Screen -->
        <div id="record-preview-screen" class="screen hidden">
          <h2 id="record-preview-title">View Records</h2>
          <div id="record-preview-content">
            <!-- Record details will be populated here -->
          </div>
          <button id="previous-previews" class="big-button hidden" data-screen="record-preview-screen">Previous</button>
          <button id="next-previews" class="big-button hidden" data-screen="record-preview-screen">Next</button>
          <button id="select-record-filters" class="big-button" data-screen="filter-records-screen" aria-label="apply filters">Apply filter</button>
        </div>

        <!-- Filter Records Screen -->
        <div id="filter-records-screen" class="screen hidden">
          <h2>Filter Records</h2>
          <div class="button-group">
            <div class="form-row">
              <label for="filter-type">Filter by:</label>
              <select id="filter-type" >
                <option value="name">Template Name</option>
                <option value="field">Field Name</option>
              </select>
            </div>
            <div class="form-row">
              <label for="filter-value">Enter value:</label>
              <input type="text" id="filter-value" placeholder="Enter a record name or field type" />
            </div>
            <div class="form-row button-group">
              <button id="apply-filter" class="big-button" data-screen="record-preview-screen" aria-label="apply filters">Apply Filter</button>
              <button id="clear-filter" class="big-button" data-screen="record-preview-screen" aria-label="clear filters">Clear Filter</button>
            </div>
          </div>
        </div>
        
        <!--All Records Screen (OUTDATED; REPLACE BY RECORD PREVIEW SCREEN)-->
        <div id="all-records-screen" class="screen hidden">
          <h2>Select a Record</h2>
          <label for="record-select">Select a Record:</label>
          <div class="dropdown-select-wrapper">
            <select id="record-select" aria-label="Record Select">
              <option value="">-- Choose a Record --</option>
            </select>
          </div>
          <button id="view-record-button" class="big-button" disabled aria-label="View Selected Record">View Record</button>
        </div>

        <!-- Record Display Screen -->
        <div id="record-display-screen" class="screen hidden">
          <h2 id="record-display-title">Record Details</h2>
          <div id="record-display-content">
            <!-- Record details will be populated here -->
          </div>
          
          <button id="previous-entries" class="big-button hidden" data-screen="record-display-screen">Previous</button>
          <button id="next-entries" class="big-button hidden" data-screen="record-display-screen">Next</button>

        </div>

        <div id="record-search-screen" class="screen hidden">
          <h2>Search Records</h2>
          <p>[Placeholder for search functionality]</p>
        </div>

        <div id="record-categories-screen" class="screen hidden">
          <h2>Browse by Categories</h2>
          <p>[Placeholder for category browsing]</p>
        </div>


        <!-- Template Selection -->
        <div id="select-template-screen" class="screen hidden">
          <h2>Select a Template</h2>

          <label for="template-dropdown">Select a Template:</label>
          <div class="dropdown-select-wrapper">
            <select id="template-dropdown" class="dropdown-select" aria-label="Template Dropdown"></select>
          </div>

          <!-- Load button centered -->
          <div class="button-group" style="margin-top: 20px;">
            <button id="select-template-confirm" class="big-button" disabled aria-label="Continue with Selected Template">Load</button>
          </div>

          <!-- Delete/Edit buttons side by side -->
          <div class="template-button-group">
            <button id="edit-template-button" class="modal-button equal-width" disabled aria-label="Edit Selected Template">Edit</button>
            <button id="delete-template-button" class="modal-button equal-width" disabled aria-label="Delete Selected Template">Delete</button>
          </div>

        </div>

        <!-- Record Selection Screen-->
        <div id="select-record-screen" class="screen hidden">
          <h2>Select a Record</h2>
          <label for="record-dropdown">Select a Record:</label>
          <div class="dropdown-select-wrapper">
            <select id="record-dropdown" class="dropdown-select" aria-label="Record Dropdown"></select>
          </div>
          <div class="button-group" style="margin-top: 20px;">
            <button id="select-record-confirm" class="modal-button" disabled aria-label="Continue with Selected Record">Continue</button>
          </div>
        </div>

        <!-- Create Template -->
        <div id="create-template-screen" class="screen hidden">
          <h2>Create Template</h2>
          <label for="template-name-input">Template Name:</label>
          <input type="text" id="template-name-input" aria-label="Template Name">

          <h3>Add Field</h3>
          <div class="field-creator">
            <label for="field-name-input">Field Name:</label>
            <input type="text" id="field-name-input" placeholder="Field Name" aria-label="Field Name">
            <label for="field-type-select">Field Type:</label>
            <select id="field-type-select" aria-label="Field Type">
              <option value="text">Text</option>
              <option value="number">Number</option>
              <option value="date">Date</option>
              <option value="boolean">Checkbox</option>
              <option value="money">Money</option>
              <option value="decimal">Decimal</option>
            </select>
            <button id="add-field-button" aria-label="Add Field">Add Field</button>
          </div>

          <h3>Fields Preview</h3>
          <ul id="template-fields-list"></ul>

          <button id="save-template-button" class="modal-button" aria-label="Save Template">Save Template</button>
          <button id="cancel-edit-button" class="modal-button hidden">Cancel Editing</button>

        </div>


        <!-- Entry Form Screen -->
        <div id="entry-form-screen" class="screen hidden">
          <h2>Fill Out Entry</h2>
          <div id="form-container"></div>
          <button id="add-entry" class="modal-button" aria-label="Add Entry">Add Entry</button>
          <div id="entries-display"></div>
          <button id="save-entry" class="modal-button" aria-label="Save Record">Save Record</button>

        </div>
      </div>
    </div>
  </main>

  <footer class="app-footer">
    <div class="footer-content">
      <div class="footer-left">
        <div class="app-logo" title="Entry Level App" aria-label="Entry Level App Logo">
          <svg width="24" height="24" viewBox="0 0 300 300" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g transform="translate(0.000000,300.000000) scale(0.100000,-0.100000)" fill="var(--button-bg)" stroke="none">
              <path d="M765 2766 c-40 -17 -84 -63 -101 -103 -11 -26 -14 -145 -14 -608 0 -623 -2 -603 54 -663 51 -57 46 -56 516 -65 239 -4 558 -9 708 -12 312 -6 324 -4 367 70 25 41 25 45 25 285 0 231 -1 244 -22 281 -14 25 -36 46 -60 57 l-37 17 -1 298 c0 246 -3 304 -15 335 -21 49 -52 81 -100 103 -38 17 -78 19 -665 18 -496 0 -631 -3 -655 -13z m1332 -52 c61 -44 63 -59 63 -386 l0 -296 55 -47 c35 -30 58 -59 63 -79 5 -17 7 -131 6 -254 -1 -204 -3 -226 -21 -250 -42 -58 -65 -62 -326 -62 -180 1 -248 5 -279 16 -33 11 -119 14 -447 14 -402 0 -406 1 -445 23 -80 45 -77 16 -76 663 0 634 -1 621 64 660 28 17 60 19 341 24 171 3 459 3 642 0 315 -5 333 -6 360 -26z"/>
              <path d="M790 2702 c-19 -11 -45 -34 -57 -52 l-23 -33 0 -554 c0 -595 -1 -581 52 -630 12 -11 41 -26 63 -31 23 -5 188 -9 383 -8 339 2 343 3 365 24 21 22 22 28 22 257 0 326 -10 315 294 318 194 2 201 3 223 25 l23 23 -3 291 c-2 268 -4 293 -22 322 -39 64 -6 61 -675 64 -580 2 -612 1 -645 -16z m1277 -46 l28 -24 3 -301 3 -300 -220 -3 c-244 -3 -249 -4 -299 -78 -22 -33 -23 -38 -20 -277 l3 -243 -368 0 c-392 0 -411 2 -437 49 -6 13 -10 215 -10 581 l0 562 29 29 29 29 616 0 615 0 28 -24z"/>
              <path d="M917 2462 c-22 -24 -21 -45 1 -65 17 -15 66 -17 505 -17 428 0 487 2 501 16 9 8 16 24 16 34 0 10 -7 26 -16 34 -14 14 -73 16 -503 16 -460 0 -489 -1 -504 -18z m963 -32 c0 -7 -160 -10 -460 -10 -300 0 -460 3 -460 10 0 7 160 10 460 10 300 0 460 -3 460 -10z"/>
              <path d="M917 2192 c-21 -23 -22 -46 -1 -66 13 -14 56 -16 314 -16 258 0 301 2 314 16 21 21 20 47 -2 67 -16 15 -53 17 -314 17 -273 0 -296 -1 -311 -18z m583 -32 c0 -5 -77 -10 -187 -12 -235 -4 -355 1 -348 13 8 12 535 12 535 -1z"/>
              <path d="M912 1928 c-18 -18 -15 -53 6 -71 16 -15 48 -17 238 -17 226 0 244 3 257 41 3 9 -1 26 -9 38 -15 20 -22 21 -248 21 -167 0 -235 -3 -244 -12z m428 -34 c3 -5 -73 -10 -180 -11 -186 -3 -239 2 -190 18 34 10 364 4 370 -7z"/>
              <path d="M2084 1871 c-21 -16 -77 -67 -123 -115 -46 -47 -90 -86 -96 -86 -7 0 -19 8 -26 17 -20 24 -90 73 -105 73 -7 0 -26 -12 -43 -26 -52 -44 -44 -73 45 -164 88 -91 120 -108 163 -90 37 15 298 280 311 315 14 37 13 40 -16 74 -32 39 -60 39 -110 2z m86 -21 c11 -11 20 -25 20 -32 0 -16 -290 -307 -313 -314 -15 -5 -39 14 -103 77 -83 83 -95 104 -72 127 23 23 53 11 108 -43 l56 -55 130 130 c71 71 135 130 142 130 7 0 21 -9 32 -20z"/>
              <path d="M2580 980 l0 -170 30 0 30 0 0 170 0 170 -30 0 -30 0 0 -170z"/>
              <path d="M350 975 l0 -165 110 0 110 0 0 30 0 30 -75 0 -75 0 0 40 0 40 60 0 60 0 0 31 0 31 -60 -6 -60 -7 0 41 0 40 70 0 70 0 0 30 0 30 -105 0 -105 0 0 -165z"/>
              <path d="M1580 975 l0 -165 105 0 105 0 0 36 0 37 -70 -6 -70 -6 0 135 0 134 -35 0 -35 0 0 -165z"/>
              <path d="M900 1080 c0 -23 -4 -30 -20 -30 -15 0 -20 -7 -20 -25 0 -18 5 -25 19 -25 17 0 19 -9 23 -81 4 -94 17 -112 83 -107 35 3 40 6 43 31 3 24 0 27 -26 27 -30 0 -30 0 -34 65 l-3 65 33 0 c28 0 32 3 32 25 0 21 -5 25 -30 25 -27 0 -30 3 -30 30 0 28 -3 30 -35 30 -32 0 -35 -2 -35 -30z"/>
              <path d="M715 1048 c-11 -6 -23 -16 -27 -22 -5 -7 -8 -4 -8 7 0 12 -8 17 -30 17 l-30 0 0 -120 0 -120 30 0 30 0 0 83 c0 91 8 107 51 107 34 0 39 -13 39 -111 l0 -79 36 0 35 0 -4 102 c-4 96 -6 103 -31 125 -29 25 -60 29 -91 11z"/>
              <path d="M1141 1033 c-20 -27 -20 -27 -21 -5 0 17 -6 22 -27 22 l-28 0 0 -120 0 -120 33 0 32 0 0 78 c0 65 3 82 19 96 10 10 27 16 38 14 14 -2 19 4 21 30 3 28 0 32 -22 32 -15 0 -32 -10 -45 -27z"/>
              <path d="M1873 1041 c-45 -28 -56 -55 -51 -119 6 -71 46 -112 109 -112 44 0 99 24 99 43 0 23 -34 36 -55 21 -26 -19 -52 -17 -75 6 -34 34 -24 40 61 40 l82 0 -7 43 c-13 81 -95 121 -163 78z m97 -52 c15 -28 10 -31 -44 -27 -46 3 -46 3 -31 26 20 28 61 29 75 1z"/>
              <path d="M2050 1050 c0 -3 20 -57 44 -120 l44 -115 34 1 c32 0 33 2 75 110 23 60 42 114 42 120 1 8 -10 9 -31 5 -29 -6 -34 -13 -59 -86 -15 -45 -29 -73 -32 -65 -3 8 -15 45 -27 81 -20 64 -23 67 -55 71 -19 2 -35 1 -35 -2z"/>
              <path d="M2375 1051 c-40 -17 -59 -50 -63 -111 -4 -57 -3 -61 31 -95 29 -29 42 -35 77 -35 43 0 100 26 100 45 0 5 -8 15 -18 21 -14 9 -22 8 -37 -2 -26 -19 -52 -17 -75 6 -34 34 -24 40 61 40 l82 0 -7 43 c-4 23 -17 52 -30 65 -25 26 -88 37 -121 23z m85 -60 c15 -30 14 -31 -40 -31 -54 0 -59 4 -33 32 21 24 60 23 73 -1z"/>
              <path d="M1267 935 c50 -127 52 -165 8 -165 -20 0 -25 -5 -25 -25 0 -22 4 -25 36 -25 52 0 71 28 130 190 l52 141 -36 -3 c-36 -3 -37 -4 -57 -75 -11 -39 -22 -74 -25 -76 -3 -3 -16 30 -29 74 l-24 79 -37 0 -38 0 45 -115z"/>
              <path d="M1175 678 c-3 -7 -29 -79 -58 -160 l-54 -148 37 0 c34 0 37 3 46 38 l9 37 61 3 60 3 10 -38 c8 -35 12 -38 48 -41 34 -3 38 -1 32 15 -4 10 -27 74 -51 143 -24 69 -47 133 -50 143 -8 20 -83 24 -90 5z m61 -100 c9 -29 19 -59 22 -65 3 -9 -9 -13 -40 -13 l-44 0 20 65 c12 35 22 65 23 65 1 0 9 -24 19 -52z"/>
              <path d="M1405 440 l0 -170 33 0 32 0 0 62 c0 48 3 59 12 50 7 -7 31 -12 53 -12 56 0 86 32 93 99 6 61 -2 95 -28 121 -25 25 -86 27 -112 3 -17 -15 -18 -15 -18 0 0 12 -9 17 -32 17 l-33 0 0 -170z m160 77 c13 -56 -8 -92 -55 -92 l-35 0 -3 53 c-4 64 9 84 52 80 27 -3 32 -8 41 -41z"/>
              <path d="M1680 440 l0 -170 36 0 36 0 -4 59 c-3 53 -1 58 14 50 22 -12 75 -11 99 1 53 29 67 147 23 199 -21 25 -34 31 -64 31 -21 0 -45 -7 -54 -15 -8 -8 -17 -15 -20 -15 -3 0 -6 7 -6 15 0 10 -10 15 -30 15 l-30 0 0 -170z m156 95 c11 -17 14 -35 10 -59 -8 -42 -27 -58 -63 -54 -26 3 -28 6 -31 56 -2 31 2 60 9 68 18 22 57 17 75 -11z"/>
            </g>
          </svg>
        </div>
        <button id="footer-home-button" class="footer-button" aria-label="Home">Home</button>
        <button id="footer-help-button" class="footer-button" aria-label="Help">Help</button>
      </div>
      
      <div class="footer-center">
        <button id="footer-back-button" class="big-button" aria-label="Back">Back</button>
      </div>
      
      <div class="footer-right">
        <span class="app-version">v1.1.2</span>
        <div class="footer-links">
          <a href="mailto:BrackenConner@my.unt.edu" class="footer-link" aria-label="Contact">Contact</a>
          <span class="footer-separator">|</span>
          <a href="https://github.com/Ucloptas/Entry-Level/" class="footer-link" aria-label="GitHub" target="_blank" rel="noopener noreferrer">GitHub</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Settings Modal -->
  <div id="settings-overlay" class="modal-overlay hidden">
    <div class="modal-content">
      <h2>Settings</h2>
      <button id="toggle-dark-mode" class="modal-button" aria-label="Toggle Dark Mode">Toggle Dark Mode</button>
      <button id="close-settings" class="modal-button" aria-label="Close Settings">Close (Esc)</button>
    </div>
  </div>

  <!-- Import/Export Modal -->
  <div id="import-export-overlay" class="modal-overlay hidden">
    <div class="modal-content">
      <h2>Import/Export Records</h2>
      <div class="button-group">
        <button id="import-record-modal-button" class="modal-button" aria-label="Import Record">Import Record</button>
        <button id="export-record-button" class="modal-button" aria-label="Export Record">Export Record</button>
        <button id="close-import-export" class="modal-button" aria-label="Close Import/Export">Close (Esc)</button>
      </div>
    </div>
  </div>

  <!-- Export Format Modal -->
  <div id="export-format-overlay" class="modal-overlay hidden">
    <div class="modal-content">
      <h2>Export Record</h2>
      <p>Choose export format:</p>
      <div class="button-group">
        <button id="export-as-json" class="modal-button" aria-label="Export as JSON">Export as JSON</button>
        <button id="export-as-csv" class="modal-button" aria-label="Export as CSV">Export as CSV</button>
        <button id="cancel-export" class="modal-button" aria-label="Cancel Export">Cancel (Esc)</button>
      </div>
    </div>
  </div>

  <!-- Exit Modal -->
  <div id="exit-overlay" class="modal-overlay hidden">
    <div class="modal-content">
      <h2>Exit Application?</h2>
      <p>Are you sure you want to quit?</p>
      <div class="button-group">
        <button id="confirm-exit" class="modal-button" aria-label="Confirm Exit">Yes, Exit (Enter)</button>
        <button id="cancel-exit" class="modal-button" aria-label="Cancel Exit">Cancel (Esc)</button>
      </div>
    </div>
  </div>

  <!-- Entry Viewer Modal -->
  <div id="entry-viewer-overlay" class="modal-overlay hidden">
    <div class="modal-content entry-modal-content">
      <h2 id="entry-viewer-title">Entry Details</h2>
      <div id="entry-viewer-content">
        <!-- Entry content will be populated here -->
      </div>
      <div class="entry-viewer-actions">
        <button id="delete-entry-button" class="modal-button delete-button" aria-label="Delete Entry">Delete Entry</button>
        <button id="edit-entry-button" class="modal-button edit-button" aria-label="Edit Entry">Edit Entry</button>
        <button id="close-entry-viewer" class="modal-button" aria-label="Close Entry Viewer">Close (Esc)</button>
      </div>
    </div>
  </div>

  <div id="status-message" class="status-toast hidden"></div>

  <script src="renderer.js"></script>
</body>
</html>
